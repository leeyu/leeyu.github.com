浏览器缓存

对于网络产品，一般缓存分三级——客户端缓存，第三方缓存，服务端缓存。 客户端缓存更多是指浏览器、local storage、native的sqlite等 第三方缓存包括了cdn、代理缓存等 服务端缓存则更加丰富mc、redis、mongo、内存、文件等

今天要说的是浏览器自带缓存。 主要分三组：

1.Expires／Cache-Control：服务端下发到客户端，通知浏览器这么长时间内改url不用请求服务器，使用本地缓存就行

2. Last-Modified：服务器下发Last-Modified头到浏览器，浏览器每次把该时间放到If-Modified-Since头中传到服务器，服务器判断在该时间后是否修改，有修改则返回给浏览器，否则返回304，从浏览器本地缓存获取

3. ETag／If-None-Match：服务器下发到浏览器，浏览器带着该头到服务端，服务端比对该etag跟当前是否一致，不一致，则返回数据，否则，返回304

为什么有了Last-Modified还要有ETag呢？因为：

1、一些文件也许会周期性的更改，但是他的内容并不改变(仅仅改变的修改时间)，这个时候我们并不希望客户端认为这个文件被修改了，而重新GET;

2、某些文件修改非常频繁，比如在秒以下的时间内进行修改，(比方说1s内修改了N次)，If-Modified-Since能检查到的粒度是s级的，这种修改无法判断(或者说UNIX记录MTIME只能精确到秒)

3、某些服务器不能精确的得到文件的最后修改时间；

结论：一般情况下，使用Expires使得客户端不用像服务端发送请求，2和3功能有类似，非严格场景，用其中一个即可。我们这次选用Expires＋Etag即可。
